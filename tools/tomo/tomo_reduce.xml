<tool id="tomo_reduce" name="Tomo Reduce" version="0.1.0" python_template_version="3.9">
    <description>Reduce tomography images</description>
    <macros>
        <import>tomo_macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code">
        <![CDATA[
            mkdir tomo_reduce_plots;
            $__tool_directory__/tomo_reduce.py
            --input_file '$input_file'
            --output_file 'output.nxs'
            --galaxy_flag
            --img_x_bounds $x_bounds.x_bound_low $x_bounds.x_bound_upp
            -l '$log'
        ]]>
    </command>
    <inputs>
        <param name="input_file" type="data" optional="false" label="Input file"/>
    </inputs>
    <outputs>
        <expand macro="common_outputs"/>
        <collection name="tomo_reduce_plots" type="list" label="Tomo data reduction images">
            <discover_datasets pattern="__name_and_ext__" directory="tomo_reduce_plots"/>
        </collection>
        <data name="output_file" format="nxs" label="Reduced tomography data" from_work_dir="output.nxs"/>
    </outputs>
    <help>
        <![CDATA[
            Reduce tomography images.
        ]]>
    </help>
    <expand macro="citations"/>
</tool>
